<div class="container">
	<div class="row blue text-center heading">
		<h1>{{openItems[currentOpen.ID].topic}}</h1>

		<span class="pull-right">
			<div class="dropdown">
				<button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">
					<i class="fa fa-cog fa-2x"></i>
				</button>

				<ul class="dropdown-menu dropdown-menu-right" ng-show="openItems[currentOpen.ID].type === 'Room'" role="menu" aria-labelledby="dropdownMenu1">
					<li role="presentation" ng-show="openItems[currentOpen.ID].ops[connectedUser]"><a role="menuitem" tabindex="-1" ng-click="setTopic()">Set Room Topic</a></li>
					<li role="presentation" ng-show="openItems[currentOpen.ID].ops[connectedUser]"><a role="menuitem" tabindex="-1" ng-click="setPassword()">Set Room Password</a></li>
					<li role="presentation" ng-show="openItems[currentOpen.ID].ops[connectedUser] && rooms[openItems[currentOpen.ID].name].locked"><a role="menuitem" tabindex="-1" ng-click="removePassword()">Remove Room Password</a></li>
					<li role="presentation"><a role="menuitem" tabindex="-1" ng-click="listItems('ops')">Ops List</a></li>
					<li role="presentation"><a role="menuitem" tabindex="-1" ng-click="listItems('banned')">Banned List</a></li>
					<li role="presentation" ng-show="currentOpen.ID !== 'Room-lobby'" class="divider"></li>
					<li role="presentation"><a role="menuitem" tabindex="-1" ng-show="currentOpen.ID !== 'Room-lobby'" ng-click="closeTab(currentOpen.ID)">Leave Room</a></li>
				</ul>

				<ul class="dropdown-menu dropdown-menu-right" ng-show="openItems[currentOpen.ID].type === 'User'" role="menu" aria-labelledby="dropdownMenu1">
					<li role="presentation"><a role="menuitem" tabindex="-1" ng-click="closeTab(currentOpen.ID)">Close Conversation</a></li>
				</ul>
			
			</div>
		</span>
	</div>
	<div class="row">
		<div class="col-md-9">
			
			<div class="row red">
				<div class="col-md-2 selectBox" ng-repeat="tab in openTabs" ng-class="{true: 'green', false: 'purple'}[tab===currentOpen.ID]" ng-click="open(tab)">
					{{openItems[tab].name}}
					<span class="pull-right" ng-hide="tab==='Room-lobby'"><i class="fa fa-times" ng-click="closeTab(tab)"></i></span>		
				</div>
			</div>
			
			<div class="row blue roomChat">
				
				<div class="col-md-12 roomChatBox purple">
					<ul>
						<li ng-repeat="message in openItems[currentOpen.ID].messages">
							<span class="col-md-3 text-left">
								{{message.nick | usernameFilter}}:
							</span> 
							<span class="col-md-9 text-left">
								{{message.message}}
							</span>
						</li>
					</ul>
				</div>

				<div class="col-md-12 input-group">
					<input type="text" ng-model="inputText" maxlength="200" class="form-control" placeholder="Enter a message..." focus-directive enter-directive enter="sendText()">
					<span class="input-group-btn">
						<button class="btn btn-default" type="button" ng-click="sendText()">Send</button>
					</span>
				</div>

			</div>
		</div>
		<div class="col-md-3">
			<div id="createRoom" class="row text-center">
				<button class="btn btn-default" ng-click="createRoom()">Create Room</button>
			</div>
			<div class="row">
				<div class="col-md-6 selectBox" ng-class="{true: 'purple', false: 'blue'}[showRooms]" ng-click="show(true)">
					ROOMS
				</div>
				<div class="col-md-6 blue selectBox" ng-class="{true: 'purple', false: 'blue'}[!showRooms]" ng-click="show(false)">
					USERS
				</div>
			</div>
			<div class="row green selectBox">
				<div ng-repeat="(roomName, val) in rooms" ng-show="showRooms" ng-click="openChatRoom(roomName)">
					{{roomName}} 
					<span class="pull-right" ng-show="rooms[roomName].locked"><i class="fa fa-lock"></i></span>
				</div>
				<div ng-repeat="(key, val) in openItems[currentOpen.ID].ops  | orderBy:'val'" ng-show="!showRooms" ng-click="privateChat(val)">
					<div ng-show="val === connectedUser">
						You
					</div>
					<div ng-show="val !== connectedUser">
						{{val}} - Op
						<span ng-show="openItems[currentOpen.ID].ops[connectedUser]">
						<i class="fa fa-ban pull-right" title="Ban" data-toggle="tooltip" ng-click="ban(val); $event.stopPropagation();"></i>
						<i class="fa fa-user-times pull-right" title="Kick" data-toggle="tooltip" ng-click="kick(val); $event.stopPropagation();"></i>
						<i class="fa fa-level-down pull-right" title="De-OP" data-toggle="tooltip" ng-click="deOp(val); $event.stopPropagation();"></i>
						</span>
					</div>
				</div>
				<div ng-repeat="(key, val) in openItems[currentOpen.ID].users | orderBy:'val'" ng-show="!showRooms" ng-click="privateChat(val)">
					{{val}}
					<span ng-show="openItems[currentOpen.ID].ops[connectedUser]">
						<i class="fa fa-ban pull-right" title="Ban" data-toggle="tooltip" ng-click="ban(val); $event.stopPropagation();"></i>
						<i class="fa fa-user-times pull-right" title="Kick" data-toggle="tooltip" ng-click="kick(val); $event.stopPropagation();"></i>
						<i class="fa fa-user-plus pull-right" title="Add Op" data-toggle="tooltip" ng-click="addOp(val); $event.stopPropagation();"></i>						
					</span>
				</div>
			</div>
		</div>
	</div>
</div>

openTabs: {{openTabs}}
<br>
<br>
OpenItems: {{openItems}}
<br>
<br>
CurrentOpen: {{currentOpen}}
<br>
<br>
Rooms: {{rooms}}